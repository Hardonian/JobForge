# MCP Server Environment Configuration
# Copy this file to .env.local and customize for your environment

# ============================================================================
# Master Switches (ALL DEFAULT TO OFF FOR SAFETY)
# ============================================================================

# Enable MCP server entirely (required for any MCP functionality)
MCP_ENABLED=0

# Enable write operations via MCP (create jobs, run jobs, cancel jobs)
MCP_WRITE_ENABLED=0

# Enable PR operations (propose_patchset, apply_patchset, open)
# Requires MCP_WRITE_ENABLED=1
MCP_PR_ENABLED=0

# Enable ReadyLayer governance tools
MCP_READYLAYER_ENABLED=0

# ============================================================================
# Development Mode
# ============================================================================

# Enable dev mode (allows unauthenticated access, includes stack traces)
# NEVER enable in production
MCP_DEV_MODE=0

# Default tenant ID for dev mode
# Format: UUID v4
MCP_DEFAULT_TENANT_ID=00000000-0000-0000-0000-000000000000

# ============================================================================
# Security Configuration
# ============================================================================

# Enable audit logging (default: ON - recommended to keep enabled)
MCP_AUDIT_ENABLED=1

# Require policy tokens for write operations (default: ON)
MCP_REQUIRE_POLICY_TOKENS=1

# Policy token secret for HMAC signing
# MUST be set in production when write operations are enabled
# Generate with: openssl rand -base64 32
MCP_POLICY_TOKEN_SECRET=

# Policy token expiration in hours (default: 1)
MCP_POLICY_TOKEN_EXPIRY_HOURS=1

# ============================================================================
# Rate Limiting
# ============================================================================

# Rate limit window in milliseconds (default: 60000 = 1 minute)
MCP_RATE_LIMIT_WINDOW_MS=60000

# Max requests per window (default: 100)
MCP_RATE_LIMIT_MAX=100

# ============================================================================
# Example: Local Development Configuration
# ============================================================================

# For local development, copy these to .env.local:
#
# MCP_ENABLED=1
# MCP_DEV_MODE=1
# MCP_WRITE_ENABLED=1
# MCP_READYLAYER_ENABLED=1
# MCP_DEFAULT_TENANT_ID=00000000-0000-0000-0000-000000000000

# ============================================================================
# Example: Production Configuration
# ============================================================================

# For production, set via secrets management:
#
# MCP_ENABLED=1
# MCP_AUDIT_ENABLED=1
# MCP_POLICY_TOKEN_SECRET=<from-vault>
# MCP_REQUIRE_POLICY_TOKENS=1
